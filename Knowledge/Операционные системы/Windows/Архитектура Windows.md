# Архитектура Windows

#WindowsAdministration

В этой статье мы разберем устройство архитектуры __Windows__

#### Пользовательский режим

* Процессы пользователя - это программы пользователя.

* Процессы служб - процессы разных сервисов windows. Они инициализируются не пользователем.

* Системные процессы - особые сервисы, которые запускает сама операционная система и ими нельзя управлять.

* Подсистемы среды - Windows subsytem for linux.

* API
  * DLL - управление подсистемой уровня ядра через документированные вызовы.

  * NTDLL.DLL - управление подсистемой уровня ядра через не документированные вызовы.

#### Режим ядра

* Исполнительная система - содержит базовые сервисные функции ОС.

* Ядро Windows - управление процессами, управление многозадачностью, управление многопроцессорными процессами, управление памятью.

* Драйверы устройств
  * Драйвера абстрактные - файловая система и прочее
  * Драйвера физическим устройств - принтеров и прочего

* Слой абстрагирования оборудования (HAL)
  * Еще один слой абстракции между ядром и реальным оборудованием.

* GDI (Graphical dispetcher interface) - оконная графическая система. Реализация функций графического интерфейса. 

#### Режим ядра - 1

* Уровень гипервизора

#### Файлы архитектуры

* Ntoskrnl.exe - исполнительная система и ядро
* Hal.dll - HAL
* Win32k.sys - часть подсистемы GUI
* Hvik64.exe - гипервизора
* *.sys - основные файлы драйверов
* Ntdll.dll
* Kernel32.dll

---

#### Структура каталогов Windows

* Windows
* Windows\System32\ 
* Windows\SysWOW64
* Windows\WinSxS - хранит несколько версий одинаковых библиотек
* C:\Windows\Software и C:\Windows\servicing\LCU - каталог пакетов обновлений
* ProgramData - в этом какталоге установленные в операциоенной системе прилождения хранят свои ланные, установочнеые файлы
* Program file и Program Files (x86)
* PerfLogs - журнал производительности
* Recovery - компоненты для среды восстановления
* Recycle.Bin - это корзина
* System value information
* SFC - утилита проверки целостности файлов
* Users - папка для хранения профилей пользователей